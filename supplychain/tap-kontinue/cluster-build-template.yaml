apiVersion: kontinue.io/v1alpha1
kind: BuildTemplate
metadata:
  name: kpack-battery
spec:
  # default set of parameters. see ClusterSourceTemplate for more
  # information. (optional)
  #
  params: []

  # jsonpath expression to instruct where in the object templated out container 
  # image information can be found. (required)
  #
  imagePath: .status.latestImage

  # template for instantiating the image provider.
  # same data available for interpolation as any other `*Template`. (required)
  #
  template:
    apiVersion: kpack.io/v1alpha1
    kind: Image
    metadata:
      name: $(workload.name)$
    spec:
      tag: registry/$(workload.name)$
      serviceAccount: service-account
      builder:
        kind: ClusterBuilder
        name: app-name-builder
      source:
        blob:
          url: registry/app-name/app-name-builder
