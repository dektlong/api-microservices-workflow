#@ load("@ytt:data", "data")
---
apiVersion: "tanzu.vmware.com/v1"
kind: SpringCloudGateway
metadata:
  name: #@ data.values.artifactId + "-gateway"
spec:
  api:
    serverUrl: #@ data.values.artifactId
    title: app-name micro-gateway
    description: Micro Gateway to control internal APIs for building microservices for app-name. 
    version: 0.1.0
    scorecards: api-scorecards
    cors:
      allowedOrigins:
        - api-portal.domain
  count: ha-count
  sso:
    secret: app-name-sso-provider-secret
  observability:
    metrics:
      wavefront:
        enabled: true
    wavefront:
      secret: app-name-observability
      source: app-name-gateway
      application: app-name
      service: app-name-gateway
